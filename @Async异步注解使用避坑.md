# spring中@Async注解异步请求用法

注意事项：

1、在spring中，基于@Async注解的方法，是被称作异步方法。它们在执行的时候，会在**独立的线程中操作**。

2、项目是springboot项目，使用@Async异步时需要在启动类中添加一个注解：**@EnableAsync**。

3、另外要注意的一点是**使用@Async注解的方法要单独的拿出来**，写一个独立的类，不要和service方法写在一起。

4、还有最最关键的一点，方法要引用@Component注解，**把普通pojo实例化到spring容器中**，这样我们才可以用。



##### 5、是否有返回值问题：

其中，1、基于@Async**无返回值**调用：使用的方式非常简单，一个标注即可解决所有的问题。

​		2、基于@Async**返回值的调用**，返回的数据类型为Future类型，其为一个接口。具体的结果类型为AsyncResult,这个是需要注意的地方。

##### 6、 基于@Async调用中的异常处理机制

##### 7、@Async调用中的事务处理机制

在@Async标注的方法，同时也适用了@Transactional进行了标注；在其调用[数据库](http://lib.csdn.net/base/mysql)操作之时，将无法产生事务管理的控制，原因就在于其是基于异步处理的操作。

那该如何给这些操作添加事务管理呢？可以将需要事务管理操作的方法放置到异步方法内部，在内部被调用的方法上添加@Transactional.

  例如：  方法A，使用了@Async/@Transactional来标注，但是无法产生事务控制的目的。

​     方法B，使用了@Async来标注，  B中调用了C、D，C/D分别使用@Transactional做了标注，则可实现事务控制的目的。